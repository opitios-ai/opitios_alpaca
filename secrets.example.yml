# Opitios Alpaca Trading Service - Configuration Template
# Copy this file to secrets.yml and fill in your actual values
# IMPORTANT: Never commit secrets.yml to version control!

# Database Configuration (REQUIRED - Primary source for user accounts)
database:
  url: 'mysql+pymysql://username:password@host:port/database_name'  # MySQL connection string

# Legacy Single Account Configuration (for backward compatibility only - NOT USED)
alpaca:
  api_key: "YOUR_ALPACA_API_KEY_HERE"
  secret_key: "YOUR_ALPACA_SECRET_KEY_HERE"
  base_url: "https://paper-api.alpaca.markets"
  paper_trading: true

# Multi-Account Configuration (FALLBACK ONLY - accounts come from database)
accounts:
  example_account:
    name: "Example Account Name"
    api_key: "EXAMPLE_API_KEY"
    secret_key: "EXAMPLE_SECRET_KEY"
    paper_trading: true
    region: "us"
    tier: "premium"
    max_connections: 3
    enabled: true

# JWT Configuration - REQUIRED
jwt:
  secret_key: "your-jwt-secret-key-change-this-in-production"
  algorithm: "HS512"
  expiration_hours: 24

# Redis Configuration (optional)
redis:
  host: "localhost"
  port: 6379
  db: 0
  password: null  # Set if Redis requires authentication

# Application Configuration - REQUIRED
app:
  debug: true
  log_level: "INFO"
  allowed_origins:
    - "http://localhost:3000"
    - "http://localhost:8090"
    - "http://127.0.0.1:3000"
    - "http://127.0.0.1:8090"

# 允许的外部IP地址（这些IP被视为内网，可以免JWT访问）
allowed_external_ips:
  - "127.0.0.1"
  - "::1"
  # 添加你的其他可信IP地址

# Trading Configuration - REQUIRED
trading:
  real_data_only: true
  enable_mock_data: false
  strict_error_handling: true
  max_option_symbols_per_request: 20

# Market Configuration
market:
  open_hour: 8
  open_minute: 50
  close_hour: 17
  close_minute: 0
  timezone: "US/Eastern"
  trading_days: [0, 1, 2, 3, 4]

# Rate Limiting Configuration
rate_limit:
  default_limit: 120
  window_seconds: 60

# Discord Configuration (optional)
discord:
  transaction_channel: null

# Sell Module Configuration
sell_module:
    enabled: true
    check_interval: 5           # 每5秒检查一次
    order_cancel_minutes: 3     # 取消3分钟前的订单
    zero_day_handling: true     # 处理零日期权

    strategy_one:
      enabled: true
      profit_rate: 1.1         # 10%止盈
      stop_loss_rate: 0.8      # -20%止损